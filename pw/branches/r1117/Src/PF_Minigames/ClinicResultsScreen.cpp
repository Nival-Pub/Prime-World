#include "stdafx.h"

#include "Core/CoreFSM.h"
#include "Client/ScreenCommands.h"

#include "UI/DBUI.h"

#include "ClinicResultsScreen.h"

namespace PF_Minigames
{
REGISTER_SCREEN(ClinicResultsScreen);
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
ClinicResultsScreen::ClinicResultsScreen() :
pDBDesc(NULL)
{
  eventsUI.AddSystemHandler( "win_left_button_down", &ClinicResultsScreen::MsgOnLMouseDown );
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
ClinicResultsScreen::~ClinicResultsScreen()
{

}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void ClinicResultsScreen::InitResults(const ClinicCreepsUIDesc & _creeps, const ClinicLevelUIDesc & _levelUIDesc, const NDb::DBMinigame_Clinic * _pDBDesc)
{
	creeps = _creeps;
  levelUIDesc = _levelUIDesc;
	pDBDesc = _pDBDesc;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
bool ClinicResultsScreen::Init( UI::User * uiUser )
{
  logic = new UI::ClinicResultsScreenLogic;
  NI_VERIFY(logic,"", return false);
  SetLogic(logic);
  logic->SetUser( uiUser );
	logic->LoadScreenLayout("ClinicResultsScreen");
	logic->InitLayout(creeps, levelUIDesc, pDBDesc);

  return true;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
bool ClinicResultsScreen::MsgOnLMouseDown( const Input::SSysParams & )
{
	NI_VERIFY(logic,"", return false);

	logic->OnLeftClick();
	return false;
}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
} // namespace PF_Minigames

NI_DEFINE_REFCOUNT(PF_Minigames::ClinicResultsScreen)

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


